<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- The view to add the discount type and its values -->
    <record id="payment_provider_form_inherit" model="ir.ui.view">
        <field name="name">payment.provider.form.inherit.custom</field>
        <field name="model">payment.provider</field>
        <field name="inherit_id" ref="payment.payment_provider_form" />
        <field name="arch" type="xml">
            <xpath expr="//notebook" position="inside">
                <page name="discount" string="Discounts">
                    <group>
                        <group>
                            <field name="discount_type" visible="1" />
                            <field name="amount_fixed" invisible="discount_type == 'percentage'" />
                            <field name="amount_percentage" invisible="discount_type == 'fixed'" />
                        </group>
                    </group>
                </page>
            </xpath>
        </field>
    </record>

    <!-- Template to add Payment Discount info to payment methods -->
    <template id="website_sale_method_inherit" inherit_id="payment.method_form">
        <xpath expr="//div[@for='o_payment_radio']" position="inside">
            <t t-if="provider_sudo.discount_type == 'fixed'">
                <t t-if="provider_sudo.amount_fixed">
                    <strong>
                    <span>-</span>
                    <t t-esc="provider_sudo.amount_fixed" />
                    <span>â‚¬</span>
                    </strong>
                </t>
            </t>
            <t t-elif="provider_sudo.discount_type == 'percentage'">
                <t t-if="provider_sudo.amount_percentage">
                    <strong>
                    <span>-</span>
                    <t t-esc="provider_sudo.amount_percentage" />
                    <span>%</span>
                    </strong>
                </t>
            </t>
        </xpath>
    </template>
</odoo>