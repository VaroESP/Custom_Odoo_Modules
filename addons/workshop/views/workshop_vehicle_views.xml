<odoo>
    <record id="workshop_vehicle_kanban" model="ir.ui.view">
        <field name="name">workshop.vehicle.kanban</field>
        <field name="model">workshop.vehicle</field>
        <field name="arch" type="xml">
            <kanban>
                <field name="name" />
                <field name="plate" />
                <field name="vehicle_category" />
                <field name="last_maintenance" />
                <field name="avatar_128" />
                <templates>
                    <t t-name="card" class="flex-row">
                        <div class="me-2">
                            <field name="avatar_128" widget="image"
                                options="{'size': [100, 100]}" />
                        </div>
                        <div class="p-2">
                            <strong>
                                <field name="name" />
                            </strong>
                            <div class="text-muted">
                                <field name="plate" />
                            </div>
                            <div class="text-muted">
                                <field name="vehicle_category" />
                            </div>
                            <div t-if="record.last_maintenance.value"
                                class="text-muted small"> Ãšltimo: <field
                                    name="last_maintenance" />
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <!-- List view -->
    <record id="workshop_vehicle_list" model="ir.ui.view">
        <field name="name">workshop.vehicle.list</field>
        <field name="model">workshop.vehicle</field>
        <field name="arch" type="xml">
            <list string="Vehicles">
                <field name="name" />
                <field name="plate" />
                <field name="customer_id" />
            </list>
        </field>
    </record>

    <!-- Form view -->
    <record id="workshop_vehicle_form" model="ir.ui.view">
        <field name="name">workshop.vehicle.form</field>
        <field name="model">workshop.vehicle</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <field name="avatar_128" widget="image" class="oe_avatar" />
                    <div name="button_box">
                        <button name="action_maintenance"
                            type="object"
                            invisible="maintenance_count == 0"
                            icon="fa-wrench">
                            <field name="maintenance_count" readonly="1" widget="statinfo" />
                        </button>
                    </div>
                    <div class="oe_title mb24">
                        <h1 class="o_row">
                            <field name="brand" placeholder="Brand" invisible="id" />
                            <field name="model" placeholder="Model" invisible="id" />
                            <field name="name" invisible="not id" />
                        </h1>
                    </div>
                    <div>
                        <strong>
                            <label for="vehicle_category" string="Vehicle Type" class="me-3" />
                        </strong>
                        <field name="vehicle_category" string="Vehicle type" />
                    </div>
                    <group>
                        <group>
                            <field name="plate" />
                            <field name="brand" placeholder="Brand" invisible="not id" />
                            <field name="model" placeholder="Model" invisible="not id" />
                            <field name="kms" placeholder="Kms" />
                        </group>
                        <group>
                            <field name="customer_id" />
                            <field name="last_maintenance" />
                            <field name="next_maintenance" readonly="0" />
                        </group>
                    </group>
                    <notebook colspan="4" invisible="not id">
                        <page string="Maintenance" name="maintenance" autofocus="autofocus">
                            <field name="maintenance_ids" mode="list"
                                context="{'default_vehicle_id': id, 'clear_defaults': True}">
                                <list string="Maintenances">
                                    <field name="name" width="25%" force_save='1' />
                                    <field name="date_request" string="Date request" width="25%"
                                        force_save='1' />
                                    <field name="mechanic_id"
                                        string="Mechanic" width="25%" force_save='1' />
                                    <field name="date_delivery" string="Date delivery" width="25%"
                                        force_save='1' />
                                </list>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Action to open vehicle views -->
    <record id="action_vehicle" model="ir.actions.act_window">
        <field name="name">Vehicles</field>
        <field name="res_model">workshop.vehicle</field>
        <field name="view_mode">list,form,kanban</field>
        <field name="view_id" ref="workshop_vehicle_list" />
    </record>
</odoo>